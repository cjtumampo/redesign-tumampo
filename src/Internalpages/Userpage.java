/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Internalpages;

/**
 *
 * @author SCC-COMLAB
 */
import com.mysql.jdbc.Statement;
import config.connection;
import config.dpconnector;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;
import javax.swing.plaf.basic.BasicInternalFrameUI;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;
import net.proteanit.sql.DbUtils;
public class Userpage extends javax.swing.JInternalFrame {

    /**
     * Creates new form Userpage
     */
    public Userpage() {
        initComponents();
    displaydata();
    this.setBorder(javax.swing.BorderFactory.createEmptyBorder(0,0,0,0));
    BasicInternalFrameUI bi = (BasicInternalFrameUI)this.getUI();
    bi.setNorthPane(null);
    }
    
    public void reset()
    {
    C_name.setText("");
    C_email.setText("");
    C_address.setText("");
    C_contact.setText("");
    C_gender.setText("");
    C_status.setText("");
    C_age.setText("");
    
    }
    public void displaydata()
    {
        try{
    dpconnector dbc = new dpconnector();
    ResultSet rs = dbc.getData("SELECT * FROM tbl_customer");
    Customer_table.setModel(DbUtils.resultSetToTableModel(rs));
        }catch(SQLException ex){
        System.out.println("Error Message");
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        C_gender = new javax.swing.JTextField();
        C_status = new javax.swing.JTextField();
        C_address = new javax.swing.JTextField();
        C_email = new javax.swing.JTextField();
        C_name = new javax.swing.JTextField();
        C_contact = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        Customer_table = new javax.swing.JTable();
        jPanel2 = new javax.swing.JPanel();
        jButton4 = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        C_age = new javax.swing.JTextField();
        C_id = new javax.swing.JTextField();

        setPreferredSize(new java.awt.Dimension(790, 550));

        jPanel1.setBackground(new java.awt.Color(204, 102, 0));
        jPanel1.setLayout(null);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 36)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("TENANTS MANAGER");
        jPanel1.add(jLabel1);
        jLabel1.setBounds(0, -10, 400, 70);

        C_gender.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "Gender", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_gender.setOpaque(false);
        jPanel1.add(C_gender);
        C_gender.setBounds(380, 120, 250, 40);

        C_status.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "status", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_status.setOpaque(false);
        C_status.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                C_statusActionPerformed(evt);
            }
        });
        jPanel1.add(C_status);
        C_status.setBounds(380, 170, 250, 40);

        C_address.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "Address", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_address.setOpaque(false);
        jPanel1.add(C_address);
        C_address.setBounds(50, 170, 290, 40);

        C_email.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "Email", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_email.setOpaque(false);
        jPanel1.add(C_email);
        C_email.setBounds(50, 120, 290, 40);

        C_name.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "Name", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_name.setOpaque(false);
        C_name.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                C_nameActionPerformed(evt);
            }
        });
        jPanel1.add(C_name);
        C_name.setBounds(50, 70, 290, 40);

        C_contact.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "Contact", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_contact.setOpaque(false);
        C_contact.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                C_contactActionPerformed(evt);
            }
        });
        jPanel1.add(C_contact);
        C_contact.setBounds(380, 70, 250, 40);

        Customer_table.setFont(new java.awt.Font("Tahoma", 0, 10)); // NOI18N
        Customer_table.setOpaque(false);
        Customer_table.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                Customer_tableMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(Customer_table);

        jPanel1.add(jScrollPane1);
        jScrollPane1.setBounds(50, 230, 690, 260);

        jPanel2.setBackground(new java.awt.Color(255, 255, 255));
        jPanel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jButton4.setBackground(new java.awt.Color(255, 255, 255));
        jButton4.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton4.setText("SAVE");
        jButton4.setAutoscrolls(true);
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });
        jPanel2.add(jButton4, new org.netbeans.lib.awtextra.AbsoluteConstraints(600, 130, 90, 30));

        jButton1.setBackground(new java.awt.Color(255, 255, 255));
        jButton1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton1.setText("DELETE");
        jButton1.setOpaque(false);
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jPanel2.add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(610, 450, 90, 30));

        jButton3.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton3.setText("RESET");
        jButton3.setOpaque(false);
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });
        jPanel2.add(jButton3, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 450, 90, 30));

        jButton2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton2.setText("UPDATE");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        jPanel2.add(jButton2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 450, 80, 30));

        C_age.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "Age", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_age.setOpaque(false);
        C_age.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                C_ageActionPerformed(evt);
            }
        });
        jPanel2.add(C_age, new org.netbeans.lib.awtextra.AbsoluteConstraints(600, 30, 90, 40));

        C_id.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2), "ID", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Trebuchet MS", 1, 11))); // NOI18N
        C_id.setOpaque(false);
        C_id.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                C_idActionPerformed(evt);
            }
        });
        jPanel2.add(C_id, new org.netbeans.lib.awtextra.AbsoluteConstraints(600, 70, 90, 40));

        jPanel1.add(jPanel2);
        jPanel2.setBounds(40, 50, 710, 490);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 790, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 550, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 1, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void C_contactActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_C_contactActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_C_contactActionPerformed

    private void C_statusActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_C_statusActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_C_statusActionPerformed

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        // TODO add your handling code here:
        dpconnector dbc = new dpconnector();

        dbc.insertData("INSERT INTO tbl_customer (t_name, t_address, t_status, t_gender, t_age,t_contact) "

                + "VALUES ('"+C_name.getText()+"', '"+C_address.getText()+"','"+C_status.getText()+"','"+C_gender.getText()+"','"+C_age.getText()+"','"+C_contact.getText()+"')");

        displaydata();
    }//GEN-LAST:event_jButton4ActionPerformed

    private void C_ageActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_C_ageActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_C_ageActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        int rowIndex = Customer_table.getSelectedRow();
       
       
       if(rowIndex < 0){
           JOptionPane.showMessageDialog(null, "Please select a data first");
       }else{
            TableModel model = Customer_table.getModel();
            Object value = model.getValueAt(rowIndex, 0);
            String id = value.toString();
             int a=JOptionPane.showConfirmDialog(null,"Are you sure?");  
                    if(a==JOptionPane.YES_OPTION){  
                            dpconnector dbc = new dpconnector();
                            dbc.deleteData(Integer.parseInt(id));
                            displaydata();
                     
                    }    
       
       }
    }//GEN-LAST:event_jButton1ActionPerformed

    private void C_nameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_C_nameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_C_nameActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        // TODO add your handling code here:
        reset();
    }//GEN-LAST:event_jButton3ActionPerformed

    private void Customer_tableMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_Customer_tableMouseClicked
        // TODO add your handling code here:
        int rowindex = Customer_table.getSelectedRow();
        if(rowindex < 0)
        {}else{
        TableModel model = Customer_table.getModel();
        C_id.setText(""+model.getValueAt(rowindex, 0));
        C_name.setText(""+model.getValueAt(rowindex, 1));
        C_address.setText(""+model.getValueAt(rowindex, 2));
        C_contact.setText(""+model.getValueAt(rowindex, 6));
        C_gender.setText(""+model.getValueAt(rowindex, 3));
        C_status.setText(""+model.getValueAt(rowindex, 5));
        C_age.setText(""+model.getValueAt(rowindex, 4));
        
        }
    }//GEN-LAST:event_Customer_tableMouseClicked

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        // TODO add your handling code here:
         dpconnector dbc = new dpconnector();
        int num = dbc.updateData("UPDATE tbl_customer "
                + "SET t_name = '"+C_name.getText()+"', t_address='"+C_address.getText()+"', "
                        + "t_status ='"+C_status.getText()+"', t_gender='"+C_gender.getText()+"' , t_age='"+C_age.getText()+"'"
                                + "WHERE t_id = '"+C_id.getText()+"'");
       
        if(num == 0){
           
        }else{
           JOptionPane.showMessageDialog(null, "Updated Successfully!");
           displaydata();
           reset();
        }
    }//GEN-LAST:event_jButton2ActionPerformed

    private void C_idActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_C_idActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_C_idActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField C_address;
    private javax.swing.JTextField C_age;
    private javax.swing.JTextField C_contact;
    private javax.swing.JTextField C_email;
    private javax.swing.JTextField C_gender;
    private javax.swing.JTextField C_id;
    private javax.swing.JTextField C_name;
    private javax.swing.JTextField C_status;
    private javax.swing.JTable Customer_table;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration//GEN-END:variables
}
